{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Ruleset for material is 'organoid'.",
  "title": "FAANG sample metadata rules for 'organoid'",
  "name": "faang_samples_organoid.metadata_rules",
  "$async": true,
  "type": "object",
  "allOf": [
    {
      "if": {
        "properties": {
          "freezing_method": {
            "properties": {
              "value": {
                "const": "fresh"
              }
            }
          }
        }
      },
      "then": {
        "required": [
          "samples_core",
          "organ_model",
          "freezing_method",
          "organoid_passage",
          "organoid_passage_protocol",
          "type_of_organoid_culture",
          "growth_environment",
          "derived_from"
        ]
      },
      "else": {
        "required": [
          "samples_core",
          "organ_model",
          "freezing_date",
          "freezing_method",
          "freezing_protocol",
          "organoid_passage",
          "organoid_passage_protocol",
          "type_of_organoid_culture",
          "growth_environment",
          "derived_from"
        ]
      }
    }
  ],
  "properties": {
    "describedBy": {
      "const": "https://github.com/FAANG/faang-metadata/blob/master/docs/faang_sample_metadata.md"
    },
    "schema_version": {
      "description": "The version number of the schema in major.minor.patch format.",
      "type": "string",
      "pattern": "^[0-9]{1,}.[0-9]{1,}.[0-9]{1,}$",
      "example": "4.6.1"
    },
    "sample_description": {
      "type": "object",
      "name": "Sample Description",
      "description": "A brief description of the sample including species name.",
      "required": ["value"],
      "properties": {
        "value": {
          "type": "string"
        },
        "mandatory": {
          "const": "optional"
        }
      }
    },
    "material": {
      "type": "object",
      "name": "Material",
      "description": "The type of material being described.",
      "required": ["text", "term"],
      "properties": {
        "text": {
          "type": "string",
          "enum": [
            "organism",
            "specimen from organism",
            "cell specimen",
            "single cell specimen",
            "pool of specimens",
            "cell culture",
            "cell line",
            "organoid",
            "restricted access"
          ]
        },
        "term": {
          "type": "string",
          "enum": [
            "OBI:0100026",
            "OBI:0001479",
            "OBI:0001468",
            "OBI:0002127",
            "OBI:0302716",
            "OBI:0001876",
            "CLO:0000031",
            "NCIT:C172259",
            "restricted access"
          ]
        },
        "mandatory": {
          "const": "mandatory"
        },
        "ontology_name": {
          "const": "OBI"
        },
        "_comment": {
          "const": "Covers organism, specimen from organism, cell specimen, pool of specimens, cell culture, cell line, organoid."
        }
      }
    },
    "project": {
      "type": "object",
      "name": "Project",
      "description": "State that the project is 'FAANG'.",
      "required": ["value"],
      "properties": {
        "value": {
          "const": "FAANG"
        },
        "mandatory": {
          "const": "mandatory"
        }
      }
    },
    "secondary_project": {
      "type": "array",
      "name": "Secondary project",
      "description": "State the secondary project(s) that this data belongs to e.g. 'AQUA-FAANG', 'GENE-SWitCH' or 'BovReg'. Please use your official consortium shortened acronym if available. If your secondary project is not in the list, please contact the faang-dcc helpdesk to have it added. If your project uses the FAANG data portal project slices (https://data.faang.org/projects) then this field is required to ensure that your data appears in the data slice.",
      "items": {
        "type": "object",
        "required": ["value"],
        "properties": {
          "value": {
            "type": "string",
            "enum": [
              "AQUA-FAANG",
              "BovReg",
              "GENE-SWitCH",
              "Bovine-FAANG",
              "EFFICACE",
              "GEroNIMO",
              "RUMIGEN",
              "Equine-FAANG",
              "Holoruminant",
              "USPIGFAANG"
            ]
          }
        },
        "mandatory": {
          "const": "optional"
        }
      }
    },
    "availability": {
      "type": "object",
      "name": "Availability",
      "description": "Either a link to a web page giving information on sample availability (who to contact and if the sample is available), or a e-mail address to contact about availability. E-mail addresses should be prefixed with 'mailto:', e.g. 'mailto:samples@example.ac.uk'. In either case, long term support of the web page or e-mail address is necessary. Group e-mail addresses are preferable to indiviudal.",
      "required": ["value"],
      "properties": {
        "value": {
          "type": "string",
          "format": "uri"
        },
        "mandatory": {
          "const": "optional"
        }
      }
    },
    "same_as": {
      "type": "object",
      "name": "Same as",
      "description": "BioSample ID for an equivalent sample record, created before the FAANG metadata specification was available. This is optional and not intended for general use, please contact the data coordination centre (faang-dcc@ebi.ac.uk) before using it.",
      "required": ["value"],
      "properties": {
        "value": {
          "type": "string"
        },
        "mandatory": {
          "const": "optional"
        }
      }
    },
    "organ_model": {
      "type": "object",
      "name": "organ model",
      "description": "Organ for which this organoid is a model system e.g. 'heart' or 'liver'. High level organ term.",
      "required": ["text", "term"],
      "properties": {
        "text": {
          "type": "string"
        },
        "term": {
          "oneOf": [
            {
              "type": "string",
              "graph_restriction": {
                "ontologies": ["obo:uberon", "obo:bto"],
                "classes": ["UBERON:0001062", "BTO:0000042"],
                "relations": ["rdfs:subClassOf"],
                "direct": false,
                "include_self": true
              }
            },
            {
              "const": "restricted access"
            }
          ]
        },
        "mandatory": {
          "const": "mandatory"
        },
        "ontology_name": {
          "type": "string",
          "enum": ["UBERON", "BTO"]
        }
      }
    },
    "organ_part_model": {
      "type": "object",
      "name": "organ part model",
      "description": "Organ part for which this organoid is a model system e.g. 'bone marrow' or 'islet of Langerhans'. More specific part of organ.",
      "required": ["text", "term"],
      "properties": {
        "text": {
          "type": "string"
        },
        "term": {
          "oneOf": [
            {
              "type": "string",
              "graph_restriction": {
                "ontologies": ["obo:uberon", "obo:bto"],
                "classes": ["UBERON:0001062", "BTO:0000042"],
                "relations": ["rdfs:subClassOf"],
                "direct": false,
                "include_self": true
              }
            },
            {
              "const": "restricted access"
            }
          ]
        },
        "mandatory": {
          "const": "optional"
        },
        "ontology_name": {
          "type": "string",
          "enum": ["UBERON", "BTO"]
        }
      }
    },
    "freezing_date": {
      "type": "object",
      "name": "freezing date",
      "description": "Date that the organoid was frozen.",
      "required": ["value", "units"],
      "properties": {
        "value": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^[12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])|[12]\\d{3}-(0[1-9]|1[0-2])|[12]\\d{3}$"
            },
            {
              "const": "restricted access"
            }
          ]
        },
        "mandatory": {
          "const": "mandatory"
        },
        "units": {
          "type": "string",
          "enum": ["YYYY-MM-DD", "YYYY-MM", "YYYY", "restricted access"]
        }
      }
    },
    "freezing_method": {
      "type": "object",
      "name": "freezing method",
      "description": "Method of freezing of organoid. Temperatures are in celsius. 'Frozen, vapor phase' refers to storing samples above liquid nitrogen in the vapor.",
      "required": ["value"],
      "properties": {
        "value": {
          "type": "string",
          "enum": [
            "ambient temperature",
            "cut slide",
            "fresh",
            "frozen, -70 freezer",
            "frozen, -150 freezer",
            "frozen, liquid nitrogen",
            "frozen, vapor phase",
            "paraffin block",
            "RNAlater, frozen",
            "TRIzol, frozen"
          ]
        },
        "mandatory": {
          "const": "mandatory"
        }
      }
    },
    "freezing_protocol": {
      "type": "object",
      "name": "freezing protocol",
      "description": "A link to the protocol for freezing.",
      "required": ["value"],
      "properties": {
        "value": {
          "oneOf": [
            {
              "type": "string",
              "format": "uri"
            },
            {
              "const": "restricted access"
            }
          ]
        },
        "mandatory": {
          "const": "mandatory"
        }
      }
    },
    "number_of_frozen_cells": {
      "type": "object",
      "name": "number of frozen cells",
      "description": "Number of organoids cells that were frozen.",
      "required": ["value", "units"],
      "properties": {
        "value": {
          "type": "number"
        },
        "units": {
          "const": "organoids"
        },
        "mandatory": {
          "const": "optional"
        }
      }
    },
    "organoid_passage": {
      "type": "object",
      "name": "organoid passage",
      "description": "Number of passages. Passage 0 is the plating of cells to create the organoid",
      "required": ["value", "units"],
      "properties": {
        "value": {
          "type": "number"
        },
        "units": {
          "const": "passages"
        },
        "mandatory": {
          "const": "mandatory"
        }
      }
    },
    "organoid_passage_protocol": {
      "type": "object",
      "name": "organoid passage protocol",
      "description": "A link to the protocol for organoid passage.",
      "required": ["value"],
      "properties": {
        "value": {
          "oneOf": [
            {
              "type": "string",
              "format": "uri"
            },
            {
              "const": "restricted access"
            }
          ]
        },
        "mandatory": {
          "const": "mandatory"
        }
      }
    },
    "organoid_culture_and_passage_protocol": {
      "type": "object",
      "name": "organoid culture and passage protocol",
      "description": "Protocol for the culture and passage of organoids, growth environment (matrigel or other); incubation temperature and oxygen level are expected in this protocol",
      "required": ["value"],
      "properties": {
        "value": {
          "oneOf": [
            {
              "type": "string",
              "format": "uri"
            },
            {
              "const": "restricted access"
            }
          ]
        },
        "mandatory": {
          "const": "mandatory"
        }
      }
    },
    "growth_environment": {
      "type": "object",
      "name": "growth environment",
      "description": "Growth environment in which the organoid is grown. e.g. 'matrigel', 'liquid suspension' or 'adherent'.",
      "required": ["value"],
      "properties": {
		"value": {
          "type": "string",
          "enum": ["matrigel", "liquid suspension", "adherent"]
        },
        "mandatory": {
          "const": "mandatory"
        }
      }
    },
    "type_of_organoid_culture": {
      "type": "object",
      "name": "type of organoid culture",
      "description": "Whether the organoid culture two dimensional or three dimensional.",
      "required": ["value"],
      "properties": {
        "value": {
          "type": "string",
          "enum": ["2D", "3D"]
        },
        "mandatory": {
          "const": "mandatory"
        }
      }
    },
    "organoid_morphology": {
      "type": "object",
      "name": "organoid morphology",
      "description": "General description of the organoid morphology. e.g. 'Epithelial monolayer with budding crypt-like domains' or 'Optic cup structure'. Be consistent within your project if multiple similar samples.",
      "required": ["value"],
      "properties": {
        "value": {
          "type": "string"
        },
        "mandatory": {
          "const": "optional"
        }
      }
    },
    "derived_from": {
      "type": "object",
      "name": "derived from",
      "description": "Sample name or BioSample ID for a specimen or organoid record.",
      "required": ["value"],
      "properties": {
        "value": {
          "type": "string"
        },
        "mandatory": {
          "const": "mandatory"
        }
      }
    }
  }
}
